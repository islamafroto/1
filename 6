# ENVIRONMENT SETUP GUIDE

This guide will help you set up your development environment for the Gym Management Application from scratch.

---

## Prerequisites

### Required Software
- **Node.js:** v18+ (LTS recommended)
- **MySQL:** v8.0+
- **Git:** Latest version
- **Code Editor:** VS Code (recommended) or any IDE

### Recommended VS Code Extensions
- ESLint
- Prettier - Code formatter
- Tailwind CSS IntelliSense
- MySQL (cweijan.vscode-mysql-client2)
- Thunder Client (for API testing)
- GitLens

---

## PART 1: System Setup

### 1.1 Install Node.js

**Windows:**
```bash
# Download from https://nodejs.org/
# Run installer and follow prompts
# Verify installation
node --version
npm --version
```

**macOS:**
```bash
# Using Homebrew
brew install node

# Verify installation
node --version
npm --version
```

**Linux (Ubuntu/Debian):**
```bash
# Using NodeSource repository
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Verify installation
node --version
npm --version
```

---

### 1.2 Install MySQL

**Windows:**
```bash
# Download MySQL Installer from https://dev.mysql.com/downloads/installer/
# Run installer
# Choose "Developer Default" setup type
# Set root password (remember this!)
# Complete installation

# Verify installation
mysql --version
```

**macOS:**
```bash
# Using Homebrew
brew install mysql

# Start MySQL service
brew services start mysql

# Secure installation
mysql_secure_installation

# Verify installation
mysql --version
```

**Linux (Ubuntu/Debian):**
```bash
# Install MySQL server
sudo apt update
sudo apt install mysql-server

# Start MySQL service
sudo systemctl start mysql
sudo systemctl enable mysql

# Secure installation
sudo mysql_secure_installation

# Verify installation
mysql --version
```

---

### 1.3 Install Git

**Windows:**
```bash
# Download from https://git-scm.com/download/win
# Run installer with default settings

# Verify installation
git --version
```

**macOS:**
```bash
# Using Homebrew
brew install git

# Or install Xcode Command Line Tools
xcode-select --install

# Verify installation
git --version
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt update
sudo apt install git

# Verify installation
git --version
```

---

## PART 2: Project Setup

### 2.1 Create Project Directory

```bash
# Create main project folder
mkdir gym-management-system
cd gym-management-system

# Create backend and frontend folders
mkdir gym-backend gym-frontend

# Initialize Git repository
git init
```

---

### 2.2 Set Up MySQL Database

```bash
# Login to MySQL
mysql -u root -p

# Create database
CREATE DATABASE gym_management CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# Create dedicated user (recommended for production)
CREATE USER 'gymadmin'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON gym_management.* TO 'gymadmin'@'localhost';
FLUSH PRIVILEGES;

# Exit MySQL
EXIT;

# Import database schema
mysql -u gymadmin -p gym_management < gym-backend/database/schema.sql
```

---

### 2.3 Set Up Backend

```bash
cd gym-backend

# Initialize Node.js project
npm init -y

# Install production dependencies
npm install express mysql2 bcrypt jsonwebtoken dotenv cors helmet morgan joi multer node-cron twilio winston express-rate-limit

# Install development dependencies
npm install --save-dev nodemon jest supertest

# Create folder structure
mkdir -p src/{config,middleware,models,controllers,routes,services,jobs,utils,validators}
mkdir -p tests/{unit,integration}
mkdir -p uploads/profiles
mkdir logs

# Create .env file
touch .env

# Create .gitignore
cat > .gitignore << EOL
node_modules/
.env
uploads/*
!uploads/.gitkeep
logs/*.log
*.log
.DS_Store
EOL

# Create .gitkeep for uploads folder
touch uploads/.gitkeep
```

#### Configure .env File
```bash
nano .env
# Or use your preferred text editor
```

Add the following content:
```env
# Server Configuration
NODE_ENV=development
PORT=5000

# Database Configuration
DB_HOST=localhost
DB_USER=gymadmin
DB_PASSWORD=your_secure_password
DB_NAME=gym_management

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
JWT_EXPIRES_IN=7d

# Twilio Configuration (get from https://www.twilio.com/)
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:3000

# File Upload
MAX_FILE_SIZE=5242880
UPLOAD_PATH=./uploads

# Logging
LOG_LEVEL=info
```

#### Update package.json Scripts
```bash
nano package.json
```

Add these scripts:
```json
{
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest --coverage",
    "test:watch": "jest --watch"
  }
}
```

---

### 2.4 Set Up Frontend

```bash
cd ../gym-frontend

# Create React app with Vite
npm create vite@latest . -- --template react

# Install dependencies
npm install

# Install additional packages
npm install react-router-dom axios zustand react-toastify date-fns react-icons

# Install Tailwind CSS
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Create folder structure
mkdir -p src/{api,components/{common,layout,auth,member,admin,notifications},pages/{auth,member,admin},hooks,store,utils,routes,styles}
```

#### Configure Tailwind CSS
```bash
nano tailwind.config.js
```

Replace content with:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
        },
      },
    },
  },
  plugins: [],
}
```

#### Configure Tailwind in CSS
```bash
nano src/styles/index.css
```

Replace content with:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles */
body {
  @apply bg-gray-50;
}
```

#### Create .env File
```bash
touch .env
```

Add:
```env
VITE_API_URL=http://localhost:5000/api
VITE_SOCKET_URL=http://localhost:5000
```

#### Update package.json Scripts (if needed)
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  }
}
```

---

## PART 3: Initial Testing

### 3.1 Test Backend Setup

```bash
cd gym-backend

# Create a simple test file
cat > server.js << 'EOL'
require('dotenv').config();
const express = require('express');
const app = express();

app.get('/health', (req, res) => {
  res.json({ status: 'OK', message: 'Server is running!' });
});

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});
EOL

# Start server
npm run dev

# In another terminal, test the endpoint
curl http://localhost:5000/health
# Should return: {"status":"OK","message":"Server is running!"}
```

### 3.2 Test Frontend Setup

```bash
cd gym-frontend

# Start development server
npm run dev

# Open browser and navigate to http://localhost:5173
# You should see the default Vite + React page
```

### 3.3 Test Database Connection

Create a test file in backend:
```bash
cd gym-backend
nano test-db.js
```

Add:
```javascript
require('dotenv').config();
const mysql = require('mysql2/promise');

async function testConnection() {
  try {
    const connection = await mysql.createConnection({
      host: process.env.DB_HOST,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
      database: process.env.DB_NAME
    });

    console.log('âœ… Database connected successfully!');
    
    const [rows] = await connection.query('SELECT COUNT(*) as count FROM users');
    console.log(`âœ… Found ${rows[0].count} users in database`);
    
    await connection.end();
  } catch (error) {
    console.error('âŒ Database connection failed:', error.message);
  }
}

testConnection();
```

Run test:
```bash
node test-db.js
```

---

## PART 4: Setting Up Twilio (SMS Service)

### 4.1 Create Twilio Account

1. Go to https://www.twilio.com/
2. Sign up for a free account
3. Verify your phone number
4. Get a Twilio phone number (free trial includes one)

### 4.2 Get Credentials

1. From Twilio Console Dashboard:
   - Copy **Account SID**
   - Copy **Auth Token**
   - Copy your **Twilio Phone Number**

2. Update `.env` file with these credentials

### 4.3 Test Twilio Integration

Create test file:
```bash
cd gym-backend
nano test-twilio.js
```

Add:
```javascript
require('dotenv').config();
const twilio = require('twilio');

const client = twilio(
  process.env.TWILIO_ACCOUNT_SID,
  process.env.TWILIO_AUTH_TOKEN
);

async function testSMS() {
  try {
    const message = await client.messages.create({
      body: 'Test message from Gym Management System',
      from: process.env.TWILIO_PHONE_NUMBER,
      to: '+1234567890' // Replace with your verified phone number
    });

    console.log('âœ… SMS sent successfully!');
    console.log('Message SID:', message.sid);
  } catch (error) {
    console.error('âŒ SMS sending failed:', error.message);
  }
}

testSMS();
```

Run test:
```bash
node test-twilio.js
```

---

## PART 5: Development Tools Setup

### 5.1 Install Postman or Thunder Client

**Postman (Desktop App):**
- Download from https://www.postman.com/downloads/
- Install and create account
- Create workspace for "Gym Management API"

**Thunder Client (VS Code Extension):**
- Install from VS Code Extensions
- No account needed
- Integrated in VS Code

### 5.2 Set Up Git Workflow

```bash
cd gym-management-system

# Configure Git
git config user.name "Your Name"
git config user.email "your.email@example.com"

# Create .gitignore in root
cat > .gitignore << EOL
# Dependencies
node_modules/
.pnp
.pnp.js

# Environment variables
.env
.env.local
.env.production

# Build outputs
dist/
build/

# Logs
logs/
*.log

# OS files
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/

# Uploads
uploads/*
!uploads/.gitkeep
EOL

# Initial commit
git add .
git commit -m "Initial project setup"
```

### 5.3 Set Up MySQL Workbench (Optional)

1. Download from https://dev.mysql.com/downloads/workbench/
2. Install and open
3. Create new connection:
   - Connection Name: Gym Management Local
   - Hostname: localhost
   - Port: 3306
   - Username: gymadmin
   - Password: [your password]
4. Test connection
5. Use for visual database management

---

## PART 6: Common Issues & Solutions

### Issue 1: MySQL Connection Error
```
Error: ER_ACCESS_DENIED_ERROR
```

**Solution:**
```bash
# Reset MySQL password
mysql -u root -p

ALTER USER 'gymadmin'@'localhost' IDENTIFIED BY 'new_password';
FLUSH PRIVILEGES;
EXIT;

# Update .env file with new password
```

### Issue 2: Port Already in Use
```
Error: listen EADDRINUSE: address already in use :::5000
```

**Solution:**
```bash
# Find process using port 5000
# macOS/Linux:
lsof -i :5000

# Windows:
netstat -ano | findstr :5000

# Kill the process or change PORT in .env
```

### Issue 3: Node Modules Not Found
```
Error: Cannot find module 'express'
```

**Solution:**
```bash
cd gym-backend
rm -rf node_modules package-lock.json
npm install
```

### Issue 4: Twilio Authentication Error
```
Error: Authentication Error
```

**Solution:**
- Verify Account SID and Auth Token are correct
- Check if phone numbers are in E.164 format (+1234567890)
- Verify Twilio account is active
- Check if using trial account - verify recipient phone number

### Issue 5: CORS Error in Frontend
```
Access to XMLHttpRequest blocked by CORS policy
```

**Solution:**
```javascript
// In backend src/app.js
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true
}));
```

---

## PART 7: Verify Complete Setup

### Checklist

- [ ] Node.js installed and verified
- [ ] MySQL installed and running
- [ ] Git installed and configured
- [ ] Backend project created
- [ ] Backend dependencies installed
- [ ] Backend .env configured
- [ ] Database created and schema imported
- [ ] Database connection tested successfully
- [ ] Frontend project created
- [ ] Frontend dependencies installed
- [ ] Frontend .env configured
- [ ] Tailwind CSS configured
- [ ] Twilio account created
- [ ] Twilio credentials added to .env
- [ ] SMS test successful (optional)
- [ ] Backend health endpoint working
- [ ] Frontend dev server running
- [ ] Git repository initialized

---

## PART 8: Next Steps

Now that your environment is set up, you can:

1. **Follow Implementation Roadmap:**
   - Start with Phase 1 (Foundation & Authentication)
   - Refer to `IMPLEMENTATION_ROADMAP.md`

2. **Review Documentation:**
   - `API_DOCUMENTATION.md` - API endpoints reference
   - `BACKEND_STRUCTURE.md` - Backend code organization
   - `FRONTEND_STRUCTURE.md` - Frontend code organization

3. **Start Coding:**
   ```bash
   # Backend
   cd gym-backend
   npm run dev
   
   # Frontend (in another terminal)
   cd gym-frontend
   npm run dev
   ```

4. **Test as You Build:**
   - Use Postman/Thunder Client for API testing
   - Test each feature before moving to next
   - Write tests for critical functionality

---

## PART 9: Production Deployment Preparation

When ready to deploy:

1. **Get a VPS:**
   - DigitalOcean Droplet (recommended)
   - AWS EC2, Google Cloud, or similar
   - Minimum: 1GB RAM, 1 CPU

2. **Get a Domain:**
   - Register domain (e.g., from Namecheap, GoDaddy)
   - Point DNS to your server IP

3. **Install SSL:**
   - Use Let's Encrypt (free)
   - Configure HTTPS

4. **Set Up Production Environment:**
   - Install Node.js and MySQL on server
   - Configure Nginx as reverse proxy
   - Set up PM2 for process management
   - Configure automatic backups

---

## Support Resources

### Documentation
- Node.js: https://nodejs.org/docs/
- Express: https://expressjs.com/
- React: https://react.dev/
- MySQL: https://dev.mysql.com/doc/
- Twilio: https://www.twilio.com/docs/

### Community
- Stack Overflow
- GitHub Issues
- Discord/Slack communities
- Reddit (r/node, r/reactjs, r/webdev)

---

**Your development environment is now ready! Good luck with your project! ðŸš€**
